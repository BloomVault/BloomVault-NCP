<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>Strain · BloomVault Farms</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link href="https://fonts.googleapis.com/css2?family=Bebas+Neue&display=swap" rel="stylesheet" />
  <link rel="stylesheet" href="assets/css/styles.css" />
  <link rel="stylesheet" href="assets/css/overrides.css" />
  <style>
    .container { max-width:1000px; margin:0 auto; padding:1rem; }
    .detail-wrap { display:grid; gap:2rem; grid-template-columns:1fr; }
    .detail-img { width:100%; height:auto; border-radius:12px; display:block; }
    .detail-meta { line-height:1.8; }
    @media (min-width:800px){ .detail-wrap{ grid-template-columns:1fr 1fr; } }
    .errbox{ background:#fee; color:#900; padding:1rem; border-radius:8px; white-space:pre-wrap; }
  </style>
</head>
<body>
  <div class="wrapper">
    <div class="sidebar">
      <div class="brand"><img src="assets/img/logo.png" alt="BloomVault Farms" /></div>
      <nav class="tabs">
        <a class="tab" href="index.html">Home</a>
        <a class="tab" href="catalogue.html">Strain Catalogue</a>
        <a class="tab" href="quote.html">Get a Quote</a>
        <a class="tab" href="contact.html">Contact Us</a>
      </nav>
      <div class="badge small">Serving Virginia commercial growers only</div>
    </div>

    <main class="main">
      <div id="strain-main" class="container">
        <article id="strain-detail"><noscript>This page needs JavaScript enabled.</noscript></article>
      </div>
    </main>
  </div>

  <!-- Keep ONLY this script on this page (no type="module" includes here) -->
  <script>
  (function () {
    try {
      var el = document.getElementById("strain-detail");
      if (!el) { document.body.innerHTML += '<div class="errbox">Error: #strain-detail not found.</div>'; return; }

      // Show something immediately
      el.textContent = "Loading…";

      var FALLBACK_IMG = "assets/img/strain-placeholder.svg";
      var id = (new URLSearchParams(location.search).get("id") || "1").trim();

      // Simple data map keyed by id
      var STRAINS = {
        "1": {
          name: "Sticky Icky",
          image: "assets/img/sticky-icky.jpg",
          type: "Hybrid",
          flowering: "8-9 Weeks",
          yield: "Medium-High",
          terpenes: "—",
          desc: "Gorilla Glue #4 X Animal Cookies."
        }
        // Add more like: "2": { name:"...", image:"...", ... }
      };

      var data = STRAINS[id];
      if (!data) {
        el.innerHTML = '<h1>Strain not found</h1><p><a href="catalogue.html">Back to catalogue</a></p>';
        return;
      }

      var imgSrc = (data.image && data.image.trim()) ? data.image : FALLBACK_IMG;

      el.innerHTML =
        '<div class="detail-wrap">' +
          '<img class="detail-img" src="' + imgSrc + '" alt="' + data.name + '" onerror="this.src=\'' + FALLBACK_IMG + '\'" />' +
          '<div>' +
            '<h1 class="heading-brand" style="margin:0 0 .5rem">' + data.name + '</h1>' +
            '<p>' + data.desc + '</p>' +
            '<ul class="detail-meta">' +
              '<li><strong>Type:</strong> ' + data.type + '</li>' +
              '<li><strong>Flowering:</strong> ' + data.flowering + '</li>' +
              '<li><strong>Yield:</strong> ' + data.yield + '</li>' +
              '<li><strong>Terpenes:</strong> ' + data.terpenes + '</li>' +
            '</ul>' +
            '<a class="btn" href="quote.html?add=' + encodeURIComponent(data.name) + '">Add to Quote</a>' +
            '<p class="small"><a href="catalogue.html">← Back to catalogue</a></p>' +
          '</div>' +
        '</div>';

    } catch (e) {
      var target = document.getElementById("strain-detail") || document.body;
      target.innerHTML = '<div class="errbox">JavaScript error:\n' + (e && e.message ? e.message : e) + '</div>';
    }
  })();
  </script>
</body>
</html>
